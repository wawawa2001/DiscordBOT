# Pomodoro Flask アプリケーション

## 概要
このアプリケーションは、Pomodoro セッションに関連するデータを管理および表示するために設計された Flask ベースの Web アプリです。MySQL データベースに接続し、レコードの取得、削除、総 Pomodoro 時間の計算などの操作を行います。

---

## 前提条件
アプリケーションを実行する前に、以下がインストールされていることを確認してください。

1. Python 3.7+
2. Flask
3. MySQL データベース
4. 必要な Python パッケージ（`requirements.txt` に記載）

---

## プロジェクト構成
```
project/
├── app.py                # Flask アプリケーションのメインファイル
├── templates/            # HTML テンプレートが格納されているフォルダ
│   ├── home.html
│   ├── history.html
│   └── total.html
├── settings.py           # データベースの資格情報を含む設定ファイル
└── requirements.txt      # 必要な Python パッケージ
```

---

## インストール

1. リポジトリをクローンします。
   ```bash
   git clone https://github.com/your-repo/pomodoro-flask-app.git
   cd pomodoro-flask-app
   ```

2. 必要な Python パッケージをインストールします。
   ```bash
   pip install -r requirements.txt
   ```

3. `settings.py` ファイルを設定します。
   以下の変数を `settings.py` に定義します。
   ```python
   HOSTNAME = "your_database_hostname"
   USERNAME = "your_database_username"
   PASSWORD = "your_database_password"
   DBNAME = "your_database_name"
   ```

---

## アプリケーションの実行
1. Flask サーバーを起動します。
   ```bash
   python app.py
   ```

2. Web ブラウザで以下にアクセスします。
   ```
   http://localhost:22245/home
   ```

---

## API エンドポイント

### ルート一覧

#### 1. ホーム
**パス:** `/home`

ホームページを表示し、ナビゲーションオプションを提供します。

#### 2. Pomodoro 履歴の表示
**パス:** `/Pomodoro_history`

`Pomodoro_history` テーブルから全てのレコードを取得して表示します。

#### 3. Pomodoro プロセスの表示
**パス:** `/Pomodoro_process`

`Pomodoro` テーブルから全てのレコードを取得して表示します。

#### 4. ユーザーの削除
**パス:** `/delete_user/<string:username>`

**メソッド:** DELETE

`Pomodoro_history` テーブルから指定されたユーザーを削除します。

#### 5. プロセスの削除
**パス:** `/delete_process/<int:no>`

**メソッド:** DELETE

`Pomodoro` テーブルから指定された ID のプロセスレコードを削除します。

#### 6. 履歴の削除
**パス:** `/delete_history/<int:no>`

**メソッド:** DELETE

`Pomodoro_history` テーブルから指定された ID の履歴レコードを削除します。

#### 7. Pomodoro 合計時間の計算
**パス:** `/Pomodoro_total_time`

ユーザーごとの総 Pomodoro 時間を取得し、時間と分の形式で表示します。

---

## データベーススキーマ

### テーブル

#### 1. `Pomodoro`
| カラム  | 型       |
|---------|----------|
| id      | INT      |
| details | VARCHAR  |

#### 2. `Pomodoro_history`
| カラム     | 型       |
|------------|----------|
| id         | INT      |
| username   | VARCHAR  |
| minutes    | INT      |

---

## 注意点
- 必要に応じて `app.run()` の `port` をサーバー設定に合わせて更新してください。
- 本番環境では、機密データに環境変数を使用してください。

---

## トラブルシューティング
### よくあるエラー
1. **接続エラー:**
   データベースのホスト名、ユーザー名、パスワード、およびポートが `settings.py` に正しく設定されていることを確認してください。

2. **依存関係の不足:**
   以下のコマンドを使用して不足しているパッケージをインストールしてください。
   ```bash
   pip install -r requirements.txt
   ```

---

## ライセンス
このプロジェクトは MIT ライセンスの下で提供されています。

